<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bus Information Form</title>
    <style>
        body {
            background-color: rgb(228, 216, 207);
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start; /* Align content at the top */
            height: 100vh;
            margin: 0;
        }

        .container-1 {
            flex: 1; /* Take one-third of the available height */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .container-2 {
            flex: 2; /* Take two-thirds of the available height */
            background-color:  rgb(228, 216, 207); /* Adjust background color as needed */
            padding: 20px;
            box-sizing: border-box;
        }

        .find-form {
            position: relative;
            background-color: rgba(17, 12, 12, 0.7);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
            text-align: center;
            width: 300px; /* Adjusted width for better readability */
            max-width: 80%; /* Set a maximum width to ensure it's responsive */
            margin-bottom: 30px;
        }

        label {
            display: block;
            margin-bottom: 10px;
            color: white; /* Change the label text color */
        }

        input[type="text"] {
            width: 100%;
            padding: 10px;
            margin-bottom: 20px;
            border: 1px solid #666; /* Change the border color */
            border-radius: 5px;
            box-sizing: border-box;
        }

        .autocomplete-items {
            position: absolute;
            border: 1px solid #d4d4d4;
            max-height: 150px;
            overflow-y: auto;
            z-index: 99;
            width: 100%;
        }

        .autocomplete-item {
            padding: 8px;
            cursor: pointer;
        }

        button {
            background-color: #007BFF;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #0056b3;
        }

        .home-button {
            display: block;
            margin-top: 1px;
            text-decoration: none;
            color: #fff;
            background-color: #28a745; /* Green color for the button */
            padding: 10px 20px;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        .home-button:hover {
            background-color: #218838; /* Darker green color on hover */
        }
    </style>
</head>

<body>
    <a href="{{url_for('home')}}" class="home-button" style="margin-top:0%; width: 4%;">Home</a>
    <div class="container-1" style="width: 60%;">
        <div class="find-form" style="width: 60%;">
            <form action="#" method="POST" onsubmit="loadData(); return false;">
                <label for="route">Route:</label>
                <input type="text" id="route" name="route" required placeholder="Choose Route" autocomplete="off">
                <div class="autocomplete-items" id="autocomplete-items" style="background-color: white;"></div>
                <button type="submit" style="width: 95px;">Search</button>
            </form>
        </div>
    </div>
    <div class="container-2" id="container-2" style="width: 90%;">
    
    </div>
    

    <script>
        function loadData() {
            var routeInput = document.getElementById('route');
            var routeValue = routeInput.value;

            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4 && this.status == 200) {
                    console.log(this.responseText);
                    document.getElementById("container-2").innerHTML = this.responseText;
                }
            };

            xhttp.open('POST', '/search', true);
            xhttp.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
            xhttp.send('route=' + routeValue);
        }

    
    
        const routeInput = document.getElementById('route');
        const autocompleteContainer = document.getElementById('autocomplete-items');

        const routes = [                                                                                                               
            'musakhedi to teen imli to navlakhkha',                                                                                                          
            'Seattle to San Diego along the Pacific Coast and California Coast Ranges',
            'Chicago to Denver via the Great Plains and Rocky Mountains',
            'New York City to Miami through the Appalachian Mountains and Florida Keys',
            'rajwada to collectorate to ganesh nagar',
            'Los Angeles to San Francisco via Central Valley and Pacific Coast Highway',
            'Chicago to Denver via the Great Plains and Rocky Mountains',
            'rajmohhalla to sarafa to itpark',
            'mujhe nhi pata',
            'erewrewrwrw',
            'tower to tantiya bhiil',
            'rajwada to collectorate to ganesh nagar  ',
            'xxxxx',
            'zzzzz'
            
        ];

        routeInput.addEventListener('input', function () {
            const inputText = this.value.toLowerCase();
            autocompleteContainer.innerHTML = '';

            const matchedRoutes = routes.filter(route => route.toLowerCase().includes(inputText));

            matchedRoutes.forEach(route => {
                const item = document.createElement('div');
                item.classList.add('autocomplete-item');
                item.innerText = route;
                item.addEventListener('click', function () {
                    routeInput.value = route;
                    autocompleteContainer.innerHTML = '';
                });
                autocompleteContainer.appendChild(item);
            });
        });

        document.addEventListener('click', function (e) {
            if (!e.target.matches('.autocomplete-item') && !e.target.matches('#route')) {
                autocompleteContainer.innerHTML = '';
            }
        });
    </script>
</body>

</html>
